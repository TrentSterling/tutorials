<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamedev Hub | Tront</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.0/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }

        .prose pre {
            background-color: #1e293b !important;
            border: 1px solid #334155;
            border-radius: 0.5rem;
        }

        .prose code {
            font-family: 'Fira Code', monospace;
            color: #38bdf8;
        }

        .prose h1 { color: #f8fafc; font-weight: 700; border-bottom: 1px solid #334155; padding-bottom: 0.5rem; }
        .prose h2 { color: #f1f5f9; font-weight: 600; margin-top: 2rem; }
        .prose a { color: #38bdf8; text-decoration: none; }
        .prose a:hover { text-decoration: underline; }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        .nav-item.active {
            background-color: #1e293b;
            border-left: 4px solid #38bdf8;
            color: #38bdf8;
        }

        .tag {
            font-size: 9px;
            padding: 1px 4px;
            border-radius: 4px;
            background: #334155;
            color: #94a3b8;
        }

        .diff-Junior { color: #22c55e; }
        .diff-Intermediate { color: #eab308; }
        .diff-Senior { color: #f97316; }
        .diff-Architect { color: #ef4444; }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-80 bg-slate-900 border-r border-slate-800 flex flex-col">
        <div class="p-6">
            <h1 class="text-xl font-bold tracking-tight text-white flex items-center gap-2">
                <span class="text-sky-500">ðŸŽ®</span> Gamedev Hub
            </h1>
            <p class="text-[10px] text-slate-500 uppercase tracking-widest mt-1">Tront Technical Series</p>
        </div>
        <nav class="flex-1 overflow-y-auto p-4 space-y-6" id="sidebar-nav">
            <!-- Sections will be injected here -->
        </nav>
        <div class="p-4 border-t border-slate-800 text-[10px] text-slate-500">
            v1.2.0 &bull; Tagged & Categorized
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto bg-slate-950 p-8 lg:p-12">
        <div class="max-w-4xl mx-auto">
            <div id="demo-wrapper" class="hidden mb-8 bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-2xl">
                <div class="px-4 py-2 border-b border-slate-800 bg-slate-900/50 flex justify-between items-center">
                    <span class="text-xs font-bold text-slate-500 uppercase tracking-widest">Interactive Demo</span>
                    <span class="text-[10px] text-slate-600">Canvas2D / JS</span>
                </div>
                <canvas id="demo-canvas" class="w-full h-[300px] cursor-crosshair"></canvas>
            </div>

            <div id="content" class="prose prose-invert prose-sky max-w-none">
                <div class="flex items-center justify-center h-64 text-slate-500">
                    <p class="text-lg animate-pulse">Select a tutorial to begin...</p>
                </div>
            </div>
        </div>
    </main>

    <script>
        const categories = [
            {
                name: "The 20 Games Challenge",
                items: [
                    { id: 'challenge', name: 'Overview & Goals', diff: 'Junior', tags: ['Path'] },
                    { id: 'ch-1-pong', name: '1. Pong', diff: 'Junior', tags: ['Phys'] },
                    { id: 'ch-2-flappy', name: '2. Flappy Bird', diff: 'Junior', tags: ['Proc'] },
                    { id: 'ch-3-breakout', name: '3. Breakout', diff: 'Junior', tags: ['Phys'] },
                    { id: 'ch-4-asteroids', name: '4. Asteroids', diff: 'Junior', tags: ['Math'] },
                    { id: 'ch-5-pacman', name: '5. Pacman', diff: 'Intermediate', tags: ['AI'] },
                    { id: 'ch-6-tetris', name: '6. Tetris', diff: 'Intermediate', tags: ['Logic'] },
                    { id: 'ch-7-platformer', name: '7. Mario Clone', diff: 'Intermediate', tags: ['Phys'] },
                    { id: 'ch-8-racer', name: '8. Micro Racers', diff: 'Intermediate', tags: ['AI'] },
                    { id: 'ch-9-doom-clone', name: '9. DOOM Clone', diff: 'Senior', tags: ['Graph'] },
                    { id: 'ch-10-starfox', name: '10. Starfox Clone', diff: 'Senior', tags: ['Math'] },
                    { id: 'ch-11-zelda', name: '11. Top-down Adventure', diff: 'Senior', tags: ['Logic'] },
                    { id: 'ch-12-simcity', name: '12. City Builder', diff: 'Senior', tags: ['Proc'] },
                    { id: 'ch-13-diablo', name: '13. Action RPG', diff: 'Senior', tags: ['Arch'] },
                    { id: 'ch-14-starcraft', name: '14. RTS', diff: 'Architect', tags: ['AI'] },
                    { id: 'ch-15-portal', name: '15. Portal Clone', diff: 'Architect', tags: ['Math'] },
                    { id: 'ch-16-fighting-game', name: '16. Fighting Game', diff: 'Architect', tags: ['Net'] },
                    { id: 'ch-17-metroid', name: '17. Metroidvania', diff: 'Senior', tags: ['Phys'] },
                    { id: 'ch-18-minecraft', name: '18. Voxel Sandbox', diff: 'Architect', tags: ['Graph'] },
                    { id: 'ch-19-mmo-lite', name: '19. MMO Lite', diff: 'Architect', tags: ['Net'] },
                    { id: 'ch-20-full-engine', name: '20. Custom Engine', diff: 'Architect', tags: ['Arch'] }
                ]
            },
            {
                name: "Foundational Math & Physics",
                items: [
                    { id: 'linear-algebra-101', name: 'Linear Algebra 101', diff: 'Junior', tags: ['Math'] },
                    { id: 'frim', name: 'FRIM (Lerp Smoothing)', diff: 'Junior', tags: ['Math', 'Unity'] },
                    { id: 'sat', name: 'SAT Collision', diff: 'Intermediate', tags: ['Physics', 'Math'] },
                    { id: 'verlet', name: 'Verlet Integration', diff: 'Intermediate', tags: ['Physics'] },
                    { id: 'pid-controllers', name: 'PID Controllers', diff: 'Senior', tags: ['Math', 'Physics'] },
                    { id: 'gjk-collision', name: 'GJK Algorithm', diff: 'Architect', tags: ['Physics', 'Math'] },
                    { id: 'pbd-physics', name: 'PBD (Position Based Dynamics)', diff: 'Architect', tags: ['Physics'] },
                    { id: 'raycast-vehicles', name: 'Raycast Vehicle Physics', diff: 'Senior', tags: ['Unity', 'Physics'] }
                ]
            },
            {
                name: "Advanced Physics & Simulation",
                items: [
                    { id: 'spd-physics', name: 'PD & SPD Controllers', diff: 'Architect', tags: ['Physics', 'Math'] },
                    { id: 'active-ragdolls', name: 'Active Ragdolls (PD)', diff: 'Senior', tags: ['Physics', 'Animation'] },
                    { id: 'voronoi-destruction', name: 'Voronoi Destruction', diff: 'Senior', tags: ['Physics', 'Math'] },
                    { id: 'compute-fluids', name: 'Compute Shader Fluids (SPH)', diff: 'Architect', tags: ['Physics', 'GPU'] }
                ]
            },
            {
                name: "AI & Pathfinding",
                items: [
                    { id: 'astar', name: 'A* Pathfinding', diff: 'Junior', tags: ['AI'] },
                    { id: 'navmesh', name: 'Navmesh & Funnel', diff: 'Intermediate', tags: ['AI'] },
                    { id: 'funnel-algorithm', name: 'String Pulling (Funnel)', diff: 'Intermediate', tags: ['AI'] },
                    { id: 'flow-fields', name: 'Flow Fields (Crowds)', diff: 'Senior', tags: ['AI', 'Math'] },
                    { id: 'influence-maps', name: 'Tactical Influence Maps', diff: 'Senior', tags: ['AI', 'Math'] },
                    { id: 'behavior-trees', name: 'Behavior Trees', diff: 'Intermediate', tags: ['AI'] },
                    { id: 'goap-ai', name: 'GOAP Planning', diff: 'Senior', tags: ['AI'] },
                    { id: 'boids', name: 'Boids Flocking', diff: 'Intermediate', tags: ['AI', 'Math'] }
                ]
            },
            {
                name: "Engine Architecture & Logic",
                items: [
                    { id: 'ecs', name: 'ECS Architecture', diff: 'Senior', tags: ['Arch'] },
                    { id: 'hsm-architecture', name: 'Hierarchical State Machines', diff: 'Intermediate', tags: ['Arch', 'C#'] },
                    { id: 'idempotence', name: 'Idempotence', diff: 'Intermediate', tags: ['Arch', 'Logic'] },
                    { id: 'hysteresis', name: 'Hysteresis', diff: 'Junior', tags: ['Arch', 'Logic'] },
                    { id: 'threading', name: 'Task-Based Threading', diff: 'Senior', tags: ['Arch', 'C#'] },
                    { id: 'spatial-hash', name: 'Spatial Hashing', diff: 'Intermediate', tags: ['Arch', 'Optimization'] },
                    { id: 'scene-graphs', name: 'Scene Graphs', diff: 'Intermediate', tags: ['Arch'] },
                    { id: 'timestep-logic', name: 'Timestep Logic', diff: 'Junior', tags: ['Arch'] },
                    { id: 'memory-allocators', name: 'Custom Allocators', diff: 'Architect', tags: ['Arch', 'C++'] }
                ]
            },
            {
                name: "Graphics & Visuals",
                items: [
                    { id: 'voxel-gi', name: 'Voxel Global Illumination', diff: 'Architect', tags: ['Graphics', 'GPU'] },
                    { id: 'pbr', name: 'PBR Shading', diff: 'Senior', tags: ['Graphics', 'Math'] },
                    { id: 'sdf-rendering', name: 'SDF Rendering', diff: 'Intermediate', tags: ['Graphics', 'Math'] },
                    { id: 'parallax-occlusion', name: 'Parallax Occlusion Mapping', diff: 'Senior', tags: ['Graphics', 'Shader'] },
                    { id: 'wfc-procedural', name: 'Wave Function Collapse', diff: 'Senior', tags: ['ProcGen'] },
                    { id: 'procedural-audio', name: 'Procedural Audio Synth', diff: 'Senior', tags: ['Audio', 'Math'] }
                ]
            },
            {
                name: "VR & Specialized Systems",
                items: [
                    { id: 'vr-physics-hands', name: 'VR Physics & Climbing', diff: 'Senior', tags: ['VR', 'Physics'] },
                    { id: 'ik', name: 'Inverse Kinematics (FABRIK)', diff: 'Senior', tags: ['Math', 'VR'] },
                    { id: 'vr-ui-interaction', name: 'VR UI Interaction', diff: 'Intermediate', tags: ['VR'] },
                    { id: 'haptic-feedback', name: 'Haptic Feedback Design', diff: 'Junior', tags: ['VR'] }
                ]
            },
            {
                name: "Networking",
                items: [
                    { id: 'networking', name: 'Prediction & Reconciliation', diff: 'Senior', tags: ['Networking'] },
                    { id: 'rollback-networking', name: 'Rollback (GGPO Style)', diff: 'Architect', tags: ['Networking'] },
                    { id: 'interest-management', name: 'Interest Management', diff: 'Senior', tags: ['Networking'] },
                    { id: 'nat-punchthrough', name: 'NAT Punchthrough', diff: 'Architect', tags: ['Networking'] },
                    { id: 'steamworks-integration', name: 'Steamworks Integration', diff: 'Intermediate', tags: ['Unity', 'Tools'] }
                ]
            },
            {
                name: "Tooling & DX",
                items: [
                    { id: 'custom-editors-unity', name: 'Custom Unity Editors', diff: 'Intermediate', tags: ['Unity', 'Tools'] },
                    { id: 'unit-testing-games', name: 'Unit Testing for Games', diff: 'Junior', tags: ['Tools', 'C#'] },
                    { id: 'llm-integration', name: 'LLM Integration', diff: 'Intermediate', tags: ['Tools'] }
                ]
            }
        ];

        const sidebarNav = document.getElementById('sidebar-nav');
        const contentDiv = document.getElementById('content');
        let currentDemo = null;

        function initSidebar() {
            sidebarNav.innerHTML = categories.map(cat => `
                <div>
                    <h3 class="px-4 text-[11px] font-bold text-slate-500 uppercase tracking-widest mb-2">${cat.name}</h3>
                    <div class="space-y-1">
                        ${cat.items.map(t => `
                            <a href="#${t.id}" 
                               class="nav-item block px-4 py-2 rounded-lg text-slate-400 hover:bg-slate-800 hover:text-white transition-colors"
                               id="nav-${t.id}">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">${t.name}</span>
                                    <span class="text-[9px] font-bold diff-${t.diff}">${t.diff[0]}</span>
                                </div>
                                <div class="flex gap-1 mt-1">
                                    ${t.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                </div>
                            </a>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        async function loadTutorial(id) {
            if (currentDemo && currentDemo.destroy) currentDemo.destroy();
            document.getElementById('demo-wrapper').classList.add('hidden');
            
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeNav = document.getElementById(`nav-${id}`);
            if (activeNav) activeNav.classList.add('active');

            try {
                const response = await fetch(`${id}/README.md`);
                if (!response.ok) throw new Error('Failed to load');
                const text = await response.text();
                
                contentDiv.innerHTML = marked.parse(text);
                contentDiv.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
                document.querySelector('main').scrollTop = 0;

                try {
                    const demoResponse = await fetch(`${id}/demo.js`);
                    if (demoResponse.ok) {
                        const demoCode = await demoResponse.text();
                        const canvas = document.getElementById('demo-canvas');
                        const wrapper = document.getElementById('demo-wrapper');
                        wrapper.classList.remove('hidden');
                        const demoFunc = new Function('canvas', demoCode);
                        currentDemo = demoFunc(canvas);
                    }
                } catch (e) {}

            } catch (err) {
                contentDiv.innerHTML = `<div class="p-8 text-center text-slate-500 border border-dashed border-slate-800 rounded-xl">
                    <h2 class="text-xl font-bold text-slate-400">Content TBD</h2>
                    <p class="mt-2 italic">The tutorial for "${id}" is currently in the scaffold phase.</p>
                </div>`;
            }
        }

        window.addEventListener('hashchange', () => {
            const id = window.location.hash.slice(1);
            if (id) loadTutorial(id);
        });

        initSidebar();
        const initialId = window.location.hash.slice(1);
        if (initialId) loadTutorial(initialId);
    </script>
</body>
</html>
